{
  "type":"queryDefs",
  "id":"View products",
  "queryDefs":{
    "#lastColumnId":12,
    "#lastTupleFieldNo":11,
    "#queryId":1,
    "#dataSource":"main",
    "#dataConnection":"MYSQL0",
    "#dataProvider":"mysql",
    "@subQuery":{
      "0":{
        "#lastColumnId":3,
        "#lastTupleFieldNo":3,
        "#queryId":2,
        "#dataSource":"memdata",
        "#dataConnection":"MYSQL0",
        "#dataProvider":"mysql",
        "@dataset":{
          "#schema":"store",
          "#datasetName":"PRODUCT_PARAMETERS",
          "@fields":{
            "0":{
              "#columnId":0,
              "#field":"PRODUCT_PARAMETER_ID",
              "#fieldNo":0,
              "#originField":"PRODUCT_PARAMETER_ID",
              "#type":"int64",
              "#tupleFieldNo":0,
              "#label":"ProdParameterID",
              "#scriptField":"ta1.PRODUCT_PARAMETER_ID"
            },
            "1":{
              "#columnId":1,
              "#field":"PRODUCT_ID",
              "#fieldNo":1,
              "#originField":"PRODUCT_ID",
              "#type":"int64",
              "#tupleFieldNo":1,
              "#label":"The owner PRODUCT",
              "#kind":"lookup",
              "#ref":"main:store/PRODUCTS",
              "#scriptField":"ta1.PRODUCT_ID"
            },
            "2":{
              "#columnId":2,
              "#field":"PARAMETER_VALUE",
              "#fieldNo":2,
              "#originField":"VALUE_STRING",
              "#type":"string",
              "#tupleFieldNo":2,
              "#label":"Parameter value",
              "#scriptField":"ta1.VALUE_STRING"
            }
          },
          "#keyField":"PRODUCT_PARAMETER_ID",
          "#keyFieldScriptName":"ta1.PRODUCT_PARAMETER_ID"
        },
        "@indexes":{
          "idx_agg_main:store/PRODUCTS^PRODUCT_ID":{
            "#type":"cluster",
            "#name":"idx_agg_main:store/PRODUCTS^PRODUCT_ID",
            "#keyFieldName":"PRODUCT_PARAMETER_ID",
            "#keyTupleFieldNo":0,
            "#byTupleFieldNo":1
          }
        },
        "#detailToMasterColumnId":1,
        "#masterFieldNo":0,
        "#detailDatasetName":"PARAMETERS",
        "#readScript":"SELECT ta1.PRODUCT_PARAMETER_ID, ta1.PRODUCT_ID, ta1.VALUE_STRING FROM \nproduct_parameters AS ta1"
      },
      "1":{
        "#lastColumnId":2,
        "#lastTupleFieldNo":2,
        "#queryId":3,
        "#dataSource":"memdata",
        "#dataConnection":"MYSQL0",
        "#dataProvider":"mysql",
        "@dataset":{
          "#schema":"store",
          "#datasetName":"PRODUCT_TYPES",
          "@fields":{
            "0":{
              "#columnId":0,
              "#field":"PRODUCT_TYPE_ID",
              "#fieldNo":0,
              "#originField":"PRODUCT_TYPE_ID",
              "#type":"int64",
              "#tupleFieldNo":0,
              "#label":"Prod Type ID",
              "#scriptField":"ta1.PRODUCT_TYPE_ID"
            },
            "1":{
              "#columnId":1,
              "#field":"TYPE_NAME",
              "#fieldNo":1,
              "#originField":"NAME",
              "#type":"string",
              "#tupleFieldNo":1,
              "#label":"Type of of product",
              "#scriptField":"ta1.NAME"
            }
          },
          "#keyField":"PRODUCT_TYPE_ID",
          "#keyFieldScriptName":"ta1.PRODUCT_TYPE_ID"
        },
        "@indexes":{
          "idx_look_main:store/PRODUCTS>PRODUCT_TYPE_ID":{
            "#type":"unique",
            "#name":"idx_look_main:store/PRODUCTS>PRODUCT_TYPE_ID",
            "#keyFieldName":"PRODUCT_TYPE_ID",
            "#keyTupleFieldNo":0
          }
        },
        "#detailToMasterColumnId":0,
        "#masterFieldNo":6,
        "#detailDatasetName":"THE_PRODUCT_TYPE",
        "#readScript":"SELECT ta1.PRODUCT_TYPE_ID, ta1.NAME FROM \nproduct_types AS ta1"
      }
    },
    "@detailIndexByFieldNo":{
      "0":"idx_agg_main:store/PRODUCTS^PRODUCT_ID",
      "6":"idx_look_main:store/PRODUCTS>PRODUCT_TYPE_ID"
    },
    "@dataset":{
      "#schema":"store",
      "#datasetName":"PRODUCTS",
      "@fields":{
        "0":{
          "#columnId":0,
          "#field":"PRODUCT_ID",
          "#fieldNo":0,
          "#originField":"PRODUCT_ID",
          "#type":"int64",
          "#tupleFieldNo":0,
          "#label":"Product Id",
          "#scriptField":"ta1.PRODUCT_ID"
        },
        "1":{
          "#columnId":1,
          "#field":"SKU",
          "#fieldNo":1,
          "#originField":"SKU",
          "#type":"string",
          "#tupleFieldNo":1,
          "#label":"SKU code",
          "#scriptField":"ta1.SKU"
        },
        "2":{
          "#columnId":2,
          "#field":"TITLE",
          "#fieldNo":2,
          "#originField":"TITLE",
          "#type":"string",
          "#tupleFieldNo":2,
          "#label":"Product title",
          "#scriptField":"ta1.TITLE"
        },
        "3":{
          "#columnId":3,
          "#field":"PARAMETERS",
          "#fieldNo":3,
          "#originField":"PARAMETERS",
          "#type":"virtual",
          "#label":"Product parameters",
          "#kind":"aggregation",
          "#ref":"memdata:store/PRODUCT_PARAMETERS",
          "#refSchema":"store",
          "#refDataset":"PRODUCT_PARAMETERS",
          "#refType":"linknext",
          "#refDatasource":"memdata",
          "#clusterIndex":"idx_agg_main:store/PRODUCTS^PRODUCT_ID",
          "#scriptField":"ta1.PARAMETERS"
        },
        "4":{
          "#columnId":4,
          "#field":"PRODUCTGROUP",
          "#fieldNo":4,
          "#originField":"PRODUCT_GROUP_ID",
          "#type":"int64",
          "#tupleFieldNo":3,
          "#kind":"lookup",
          "#ref":"main:store/PRODUCT_GROUPS",
          "#refSchema":"store",
          "#refDataset":"PRODUCT_GROUPS",
          "#refType":"join",
          "@dataset":{
            "#schema":"store",
            "#datasetName":"PRODUCT_GROUPS",
            "@fields":{
              "0":{
                "#columnId":5,
                "#field":"THE_PRODUCT_GROUP_NAME",
                "#fieldNo":0,
                "#originField":"NAME",
                "#type":"string",
                "#tupleFieldNo":4,
                "#label":"Group name",
                "#scriptField":"ta2.NAME"
              },
              "1":{
                "#columnId":6,
                "#field":"THE_PRODUCT_GROUP_TITLE",
                "#fieldNo":1,
                "#originField":"TITLE",
                "#type":"string",
                "#tupleFieldNo":5,
                "#label":"Group title",
                "#scriptField":"ta2.TITLE"
              },
              "2":{
                "#columnId":7,
                "#field":"LINKED_PARENT_GROUP",
                "#fieldNo":2,
                "#originField":"PARENT_ID",
                "#type":"int64",
                "#tupleFieldNo":6,
                "#kind":"lookup",
                "#ref":"store/PRODUCT_GROUPS",
                "#refSchema":"store",
                "#refDataset":"PRODUCT_GROUPS",
                "#refType":"join",
                "@dataset":{
                  "#schema":"store",
                  "#datasetName":"PRODUCT_GROUPS",
                  "@fields":{
                    "0":{
                      "#columnId":8,
                      "#field":"THE_PARENT_GROUP_NAME",
                      "#fieldNo":0,
                      "#originField":"NAME",
                      "#type":"string",
                      "#tupleFieldNo":7,
                      "#label":"Parent group name",
                      "#scriptField":"ta3.NAME"
                    }
                  },
                  "#keyField":"PRODUCT_GROUP_ID",
                  "#keyFieldScriptName":"ta3.PRODUCT_GROUP_ID"
                },
                "#scriptField":"ta2.PARENT_ID"
              }
            },
            "#keyField":"PRODUCT_GROUP_ID",
            "#keyFieldScriptName":"ta2.PRODUCT_GROUP_ID"
          },
          "#scriptField":"ta1.PRODUCT_GROUP_ID"
        },
        "5":{
          "#columnId":9,
          "#field":"SECONDGROUP",
          "#fieldNo":5,
          "#originField":"PRODUCT_SECOND_GROUP_ID",
          "#type":"int64",
          "#tupleFieldNo":8,
          "#kind":"lookup",
          "#ref":"main:store/PRODUCT_GROUPS",
          "#refSchema":"store",
          "#refDataset":"PRODUCT_GROUPS",
          "#refType":"join",
          "@dataset":{
            "#schema":"store",
            "#datasetName":"PRODUCT_GROUPS",
            "@fields":{
              "0":{
                "#columnId":10,
                "#field":"PRODUCT_SECOND_GROUP_NAME",
                "#fieldNo":0,
                "#originField":"NAME",
                "#type":"string",
                "#tupleFieldNo":9,
                "#label":"Second group name",
                "#scriptField":"ta4.NAME"
              }
            },
            "#keyField":"PRODUCT_GROUP_ID",
            "#keyFieldScriptName":"ta4.PRODUCT_GROUP_ID"
          },
          "#scriptField":"ta1.PRODUCT_SECOND_GROUP_ID"
        },
        "6":{
          "#columnId":11,
          "#field":"THE_PRODUCT_TYPE",
          "#fieldNo":6,
          "#originField":"PRODUCT_TYPE_ID1",
          "#type":"int64",
          "#tupleFieldNo":10,
          "#kind":"lookup",
          "#ref":"memdata:store/PRODUCT_TYPES",
          "#refSchema":"store",
          "#refDataset":"PRODUCT_TYPES",
          "#refType":"linknext",
          "#refDatasource":"memdata",
          "#uniqueIndex":"idx_look_main:store/PRODUCTS>PRODUCT_TYPE_ID",
          "#scriptField":"ta1.PRODUCT_TYPE_ID1"
        }
      },
      "#keyField":"PRODUCT_ID",
      "#keyFieldScriptName":"ta1.PRODUCT_ID"
    },
    "@indexes":{
      "*PRIMARY*":{
        "#type":"unique",
        "#name":"*PRIMARY*",
        "#keyFieldName":"PRODUCT_ID",
        "#keyTupleFieldNo":0
      }
    },
    "#readScript":"SELECT ta1.PRODUCT_ID, ta1.SKU, ta1.TITLE, ta1.PRODUCT_GROUP_ID, ta2.NAME, ta2.TITLE, ta2.PARENT_ID, ta3.NAME, ta1.PRODUCT_SECOND_GROUP_ID, ta4.NAME, ta1.PRODUCT_TYPE_ID1 FROM \n((products AS ta1 LEFT JOIN product_groups AS ta2 ON ta1.PRODUCT_GROUP_ID=ta2.PRODUCT_GROUP_ID)\n LEFT JOIN product_groups AS ta3 ON ta2.PARENT_ID=ta3.PRODUCT_GROUP_ID)\n LEFT JOIN product_groups AS ta4 ON ta1.PRODUCT_SECOND_GROUP_ID=ta4.PRODUCT_GROUP_ID"
  }
}
